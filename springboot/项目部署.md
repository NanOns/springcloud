

* 部署脚本
```text
#!/bin/bash
shell_log="/var/log/ddyd_shell.log"
MVN_HOME="/usr/local/apache-maven-3.3.9"
JENKINS_HOME="/home/ddyd/workspace"

echo -e "\n###################   `date +%F_%T`   ###############\n" >>$shell_log

\rm -rf /home/DDYD/*
\cp -ra $JENKINS_HOME/ddyd/* /home/DDYD/
#配置文件拷贝
\cp -ra /home/configbak/ddyd/application.yml $JENKINS_HOME/ddyd/src/main/resources

#获取srping-boot的PID
p=`pgrep -f spring-boot-start`

if [ -n "`ps aux |grep $p |grep -v 'grep'`" ];then
    kill -9 $p >/dev/null 2>&1
    echo -e "\e[32;1m OK\e[0m stop ddyd-server-8080"
    else
    echo -e "ddyd-server-8080 not run"
fi

sleep 2

cd $JENKINS_HOME/ddyd
#export MAVEN_OPTS="-Xms512m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=512m"
nohup $MVN_HOME/bin/mvn clean spring-boot:run | tee ../log 2>&1 &

#等待ddyd-server启动完成
echo "sleeping about 20 seconds for starting ddyd-server ........"
sleep 20

#获取srping-boot的PID
p=`pgrep -f spring-boot-start`

if [ `netstat -tnpl | grep $p | wc -l` -gt 0 ]
  then
    echo  -e "\e[32;1m OK\e[0m start ddyd-server-8080" # |tee -a $admlogs
  else
    echo  -e "\e[31;5m Fail\e[0m start ddyd-server-8080" # |tee -a $admlogs
fi
```